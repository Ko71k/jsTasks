### Отчет о нагрузочном тестировании

#### Цель тестирования
Провести нагрузочное тестирование API приложения, чтобы оценить производительность при создании и чтении основной сущности. Выявить возможные узкие места и предложить оптимизации.

---

### 1. Нагрузочное тестирование создания сущностей

**Команда тестирования:**
```bash
wrk -t12 -c400 -d60s -s perf_test/post.lua http://localhost:8080/events
```

**Результаты:**
- **Общее время теста:** 1 минута
- **Количество потоков:** 12
- **Количество соединений:** 400
- **Запросов выполнено:** 117,912
- **Запросов в секунду (RPS):** 1961.96
- **Средняя задержка:** 201.42 ms
- **Максимальная задержка:** 365.19 ms
- **Объем переданных данных:** 65.67 MB

---

### 2. Нагрузочное тестирование чтения сущностей

**Команда тестирования:**
```bash
wrk -t12 -c400 -d60s -s perf_test/get.lua http://localhost:8080
```

**Результаты:**
- **Общее время теста:** 1 минута
- **Количество потоков:** 12
- **Количество соединений:** 400
- **Запросов выполнено:** 6,962
- **Запросов в секунду (RPS):** 115.88
- **Средняя задержка:** 973.31 ms
- **Максимальная задержка:** 1.99 s
- **Объем переданных данных:** 3.81 MB
- **Ошибки сокетов:** timeout 6724

---

### 3. Нагрузочное тестирование чтения конкретной сущности

**Команда тестирования:**
```bash
wrk -t12 -c400 -d60s http://localhost:8080/events/190260
```

**Результаты:**
- **Общее время теста:** 1 минута
- **Количество потоков:** 12
- **Количество соединений:** 400
- **Запросов выполнено:** 6,965
- **Запросов в секунду (RPS):** 115.95
- **Средняя задержка:** 1.03 s
- **Максимальная задержка:** 2.00 s
- **Объем переданных данных:** 3.81 MB
- **Ошибки сокетов:** timeout 6713

---

### 4. Анализ результатов

- **Создание сущностей**: Производительность при создании сущностей высока (1961.96 RPS), что указывает на хорошую оптимизацию этого процесса.
  
- **Чтение сущностей**: Задержка при чтении сущностей значительно выше (973.31 ms), что говорит о возможных узких местах в запросах к базе данных или в самой логике обработки данных. Высокое значение таймаутов также указывает на проблемы с производительностью.

### 5. Рекомендации по оптимизации

1. **Оптимизация запросов**: Проверьте SQL-запросы, используемые для чтения сущностей. Возможно, стоит добавить индексы или оптимизировать структуру запросов.
  
2. **Кэширование**: Рассмотрите возможность внедрения кэширования для часто запрашиваемых данных, чтобы снизить нагрузку на базу данных.

3. **Профилирование**: Используйте инструменты профилирования для выявления узких мест в коде приложения.

4. **Тестирование с меньшей нагрузкой**: Проведите тесты с меньшим количеством соединений и потоков, чтобы лучше понять, как приложение ведет себя при различных нагрузках.

---

### Заключение

Результаты тестирования показывают, что приложение хорошо справляется с нагрузкой при создании сущностей, но требует оптимизации при чтении. Рекомендуется провести дополнительные тесты и оптимизации для улучшения производительности. Все результаты и рекомендации будут задокументированы в `perf_test/README.md`.
